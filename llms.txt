actions:
  - name: search-linkedin
    type: script
    script: search_script.py
    description: "nogtipsにてブログ記事内検索"
    params:
      - name: query
        required: true
        type: string
        description: "検索クエリ"
    command: python -m pytest ./tmp/myscript/search_script.py --query ${params.query}
    slowmo: 2500

  - name: action-runner-nogtips
    type: action_runner_template
    action_script: nogtips_search
    description: "保存済みのブラウザ操作魔法を唱える"
    params:
      - name: query
        required: false
        type: string
        description: "検索クエリ"
        default: "LLMs.txt"
    command: python ./tmp/myscript/unified_action_launcher.py --action ${action_script} --query ${params.query|LLMs.txt} --slowmo 2500 --countdown 3

  - name: phrase-search
    type: browser-control
    params:
      - name: query
        required: true
        type: string
        description: "Search query to execute"
    slowmo: 1000
    description: "browser-controlを利用したplaywrightベーススクリプト実行　その１"
    flow:
      - action: command
        url: "https://www.google.com"
        wait_for: "#APjFqb"
      - action: click
        selector: "#APjFqb"
        wait_for_navigation: true
      - action: fill_form
        selector: "#APjFqb"
        value: "${params.query}"
      - action: keyboard_press
        selector: "Enter"

  - name: search-nogtips
    type: browser-control
    slowmo: 1000
    params:
      - name: query
        required: true
        type: string
        description: "Search query to execute"
    slowmo: 1000
    description: "browser-controlを利用したplaywrightベーススクリプト実行　その２"
    flow:
      - action: command
        url: "https://nogtips.wordpress.com/"
        wait_until: "domcontentloaded"
      - action: click
        selector: "#eu-cookie-law > form > input"
      - action: click
        selector: "#search-2 > form > label > input"
      - action: fill_form
        selector: "#search-2 > form > label > input"
        value: "${params.query}"
      - action: keyboard_press
        selector: "Enter"

  - name: site-defined-script
    type: git-script
    git: https://github.com/Nobukins/sample-tests.git
    script_path: search_script.py
    version: main
    description: "git管理でのブラウザ操作のコマンド管理"
    params:
      - name: query
        required: true
        type: string
        description: "Search query to execute"
    command: python -m pytest ${script_path} --query ${params.query}
    timeout: 120
    slowmo: 1000

  - name: search-jsonpayload
    type: unlock-future
    keep_tab_open: true
    description: "unlock-futureを利用したインタラクティブセッション　その１"
    params:
      - name: query
        required: true
        type: string
        description: "Search query to execute"
    flow:
      - action: command
        url: "https://www.google.com"
        wait_for: "#APjFqb"
      - action: click
        selector: "#APjFqb"
        wait_for_navigation: true
      - action: fill_form
        selector: "#APjFqb"
        value: "${params.query}"
      - action: keyboard_press
        key: "Enter"

  - name: click-jsonpayload
    type: unlock-future
    tab_selection_strategy: active_tab  # Explicitly specify active_tab
    keep_tab_open: true
    flow:
      - action: keyboard_press
        key: "Enter"
    description: "unlock-futureを利用したインタラクティブセッション　その２（クリック）"

  - name: nogtips-jsonpayload
    type: unlock-future
    keep_tab_open: True
    tab_selection_strategy: new_tab  # 明示的に新規タブを指定
    description: "unlock-futureを利用したインタラクティブセッション　その３"
    params:
      - name: query
        required: true
        type: string
        description: "Search query to execute"
    slowmo: 1000
    flow:
      - action: command
        url: "https://nogtips.wordpress.com/"
        wait_until: "domcontentloaded"
      - action: click
        selector: "#eu-cookie-law > form > input"
      - action: click
        selector: "#search-2 > form > label > input"
      - action: fill_form
        selector: "#search-2 > form > label > input"
        value: "${params.query}"
