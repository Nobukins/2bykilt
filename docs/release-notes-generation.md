# Automatic Release Notes Generation Guide

## Overview

GitHub Actions automatically generates categorized release notes from conventional commits and PR labels. This guide explains how to effectively use this feature to maintain high-quality Release Notes pages.

## Release Notes Architecture

### How It Works

```text
Conventional Commits
↓
GitHub Actions Workflow
↓
PR Labels & Metadata
↓
.github/release.yml Configuration
↓
Auto-Generated Release Notes
```

### Configuration Files

**`.github/workflows/release-management.yml`**

- Extracts commits by type (feat, fix, docs, etc.)
- Generates categorized changelog
- Creates GitHub Release with notes

**`.github/release.yml`**

- Defines release note categories
- Maps labels to categories
- Configures exclusions and customizations

## Commit Convention & Release Notes Mapping

### Conventional Commit Format

```text
<type>(<scope>): <subject>

<body>

<footer>
```

### Type Categories and Icons

| Type | Icon | Category | When to Use |
|------|------|----------|------------|
| `feat` | 🚀 | Features | New functionality |
| `fix` | 🐛 | Bug Fixes | Bug resolution |
| `docs` | 📚 | Documentation | Documentation updates |
| `perf` | ⚡ | Performance | Performance improvements |
| `refactor` | 🔧 | Refactoring | Code structure changes |
| `test` | ✅ | Testing | Test additions/updates |
| `ci` | 🤖 | CI/CD | CI/CD workflow changes |
| `chore` | 📝 | Other Changes | Other changes |

### Examples

#### Feature

```bash
git commit -m "feat(cli): Add batch version update support"
```

Example: Creates PR label: feature. Appears in: ✨ Features section

#### Bug Fix

```bash
git commit -m "fix(parser): Handle edge case in prerelease parsing"
```

Example: Creates PR label: bug. Appears in: 🐛 Bug Fixes section

#### Documentation

```bash
git commit -m "docs(guide): Add advanced usage examples"
```

Example: Creates PR label: documentation. Appears in: 📚 Documentation section

#### Performance

```bash
git commit -m "perf(version): Optimize version comparison algorithm"
```

Example: Creates PR label: performance. Appears in: ⚡ Performance section

#### Refactoring

```bash
git commit -m "refactor(core): Simplify version manager logic"
```

Example: Creates PR label: refactor. Appears in: 🔧 Refactoring section

## Release Notes Categories

### Configured Categories in `.github/release.yml`

```yaml
categories:
  - title: 🚀 Features
    labels: [feature, enhancement, feat]

  - title: 🐛 Bug Fixes
    labels: [bug, bugfix, fix]

  - title: 📚 Documentation
    labels: [documentation, docs]

  - title: ⚡ Performance
    labels: [performance, perf]

  - title: 🔧 Refactoring
    labels: [refactor, refactoring]

  - title: ✅ Testing
    labels: [test, tests, testing]

  - title: 📦 Dependencies
    labels: [dependencies, dependency-update, deps]

  - title: 🤖 CI/CD
    labels: [ci, cd, github-actions, ci-cd]

  - title: 📝 Other Changes
    labels: [chore, other]
```

## Creating Effective Release Notes

### Step 1: Use Conventional Commits

Always write commits following the format:

```bash
# Good ✅
git commit -m "feat(cli): Add support for version tagging"

# Also Good ✅
git commit -m "fix(parser): Handle empty version strings"

# Also Good ✅
git commit -m "docs(readme): Add quick start section"
```

### Step 2: Add PR Labels

When creating a Pull Request, add appropriate labels:

- `feature` for new features
- `bug` for bug fixes
- `documentation` for docs
- `performance` for optimizations

GitHub's Semantic Pull Request action helps with this automatically!

### Step 3: Example Release Notes Output

When version 1.1.0 is released:

```markdown
# Release Notes: v1.1.0

## Changes since v1.0.0

### 🚀 Features
- Add batch version update support (#123)
- Add prerelease progression automation (#125)
- Support custom version validation rules (#128)

### 🐛 Bug Fixes
- Fix edge case in prerelease parsing (#124)
- Fix CLI output formatting issues (#126)
- Handle empty version strings gracefully (#127)

### 📚 Documentation
- Add advanced usage examples (#120)
- Update quick start guide (#121)
- Add troubleshooting section (#122)

### ⚡ Performance
- Optimize version comparison algorithm (#119)

### 🔧 Refactoring
- Simplify version manager logic (#118)
- Extract common parsing utilities (#117)

---
*Generated by GitHub Actions Release Management*
```

## Best Practices

### DO ✅

1. **Use Conventional Commits**

```bash
git commit -m "feat(scope): Brief description"
```

1. **Be Descriptive**

```bash
git commit -m "feat(cli): Add support for semver ranges"
```

1. **Include Scope**

```bash
git commit -m "fix(parser): Handle null values correctly"
```

1. **Group Related Changes** - Multiple related commits in one PR, all tagged with same feature label

1. **Add PR Labels** - Always label PRs with appropriate category, use labels matching `.github/release.yml`

### DON'T ❌

1. **Avoid Vague Messages**

```bash
git commit -m "Update stuff"
```

1. **Don't Mix Types**

```bash
git commit -m "feat: Add feature and fix bug"
```

1. **Avoid Direct git tag Creation**

```bash
# Instead: Use version CLI
python bykilt.py version bump --type minor
git push
```

1. **Don't Skip Release Notes Review** - Review auto-generated notes, add manual context if needed

## Customization

### Adding New Categories

Edit `.github/release.yml`:

```yaml
categories:
  - title: 🎉 New Category
    labels: [label1, label2]
```

### Excluding Changes

Add to `.github/release.yml`:

```yaml
exclude:
  authors:
    - dependabot
  labels:
    - skip-changelog
```

### Custom Release Notes Template

Override in workflow step:

```yaml
- name: Create GitHub Release
  uses: actions/create-release@v1
  with:
    body: |
      Custom template here
      ${{ steps.generate-release-notes.outputs.release_notes }}
```

## Workflow Integration

### Automatic Release Notes Generation

1. **Push code with conventional commits**

```bash
git commit -m "feat(version): Add new feature"
git push origin main
```

1. **Update VERSION file**

```bash
python bykilt.py version bump --type minor
git add VERSION
git commit -m "chore(release): Bump to 1.1.0"
git push origin main
```

1. **GitHub Actions triggers**

- Detects VERSION change
- Extracts commits since last version
- Generates categorized release notes
- Creates GitHub Release automatically

1. **Release Notes appear on GitHub**

- Go to repository → Releases
- View newly created release
- See auto-categorized notes

### Manual Release Trigger

If needed, manually trigger workflow:

```bash
gh workflow run release-management.yml \
  --ref main \
  -f create_release=true
```

## Monitoring & Validation

### Verify Conventional Commits

```bash
# Check last 10 commits
git log --format="%s" -10

# Count commits with type prefix
git log --format="%s" -10 | grep -E "^(feat|fix|docs|refactor|perf|test|ci|chore):" | wc -l
```

### Review Auto-Generated Notes

1. Go to GitHub repository
2. Click "Releases" tab
3. View latest release
4. Verify categories and descriptions

### Troubleshoot Missing Changes

If commits aren't in release notes:

```bash
# Check if commit has proper type
git log --format="%s" | head -1

# Check PR labels
# Go to GitHub → PRs → Check labels

# Check .github/release.yml for label mapping
cat .github/release.yml | grep -A 3 "title:"
```

## Example Release Notes Page

### Release v2.0.0

```markdown
# Release 2.0.0 - Major Version Release

## 🚀 Features
- Add support for version constraints
- Add version range validation
- Support multiple version formats

## 🐛 Bug Fixes
- Fix compatibility with Node.js 18
- Fix memory leak in version parser

## 📚 Documentation
- Add migration guide
- Add API reference

## ⚡ Performance
- Improve version comparison speed by 50%

## 🔧 Refactoring
- Refactor core version logic
- Extract validation utilities

## ✅ Testing
- Add 50 new tests
- Improve coverage to 95%+
```

## Related Documentation

- [CI/CD Integration Guide](./ci-cd-integration.md)
- [Release Process Guide](./release-process.md)
- [Version Management Guide](./version-management.md)
- [GitHub: Automatically Generated Release Notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)
- [Conventional Commits](https://www.conventionalcommits.org/)

## Summary

### Automatic Release Notes Benefits

- Categorized, professional release notes
- Zero manual note-taking required
- Consistent format across releases
- Easy to review and validate
- Reduced human error
- Fast, efficient documentation

### Key to Success

- Use conventional commit format
- Add PR labels consistently
- Maintain `.github/release.yml`
- Review generated notes before publishing

This approach ensures your Release Notes page is always up-to-date, professional, and reflective of your actual changes.
