[pytest]
# Default options: fail fast on first error, collect coverage for src/, and emit XML + terminal reports
addopts = --maxfail=1 --cov=src --cov-report=xml --cov-report=term
# Discover tests only under tests/ to avoid duplicate root-level test modules
testpaths = tests

# Ignore temp/virtualenv and VCS dirs during discovery
# Ignore problem directories during collection (relative to invocation CWD)
norecursedirs = tmp tmp/* venv .venv .git node_modules ../tmp ../tmp/* ../venv ../.venv

# Keep current behavior: strict mode to avoid unintentionally running async tests
asyncio_mode = strict
# Silence deprecation warning by explicitly setting loop scopes
asyncio_default_fixture_loop_scope = function
asyncio_default_test_loop_scope = function

# Register markers for selective test execution
markers =
	ci_safe: Tests that are safe to run in CI without external browsers or credentials
	local_only: Tests that require a developer machine or real browser/profile and should be skipped in CI
