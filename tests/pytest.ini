[pytest]
# Default options: fail fast on first error, collect coverage for src/, and emit XML + terminal reports
addopts = --maxfail=1 --cov=src --cov-report=xml --cov-report=term
# Discover tests under tests/ by default
testpaths = .

# Ignore temp/virtualenv and VCS dirs during discovery
# Ignore problem directories during collection (relative to invocation CWD)
norecursedirs = tmp tmp/* venv .venv .git node_modules ../tmp ../tmp/* ../venv ../.venv

# Explicitly ignore tmp paths that contain a non-top-level conftest
ignore = tmp tmp/* ../tmp ../tmp/*

# Keep current behavior: strict mode to avoid unintentionally running async tests
asyncio_mode = strict
# Silence deprecation warning by explicitly setting loop scopes
asyncio_default_fixture_loop_scope = function
asyncio_default_test_loop_scope = function
